<!DOCTYPE html>
<html>
<head>
  <title>Location Capture</title>
</head>
<body>
  <h1>Getting your location...</h1>
  <script>
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(position => {
        const latitude = position.coords.latitude;
        const longitude = position.coords.longitude;

        // Send location to backend API
        fetch('https://192.168.1.43:8443/PutMessage', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ latitude, longitude }),
        })
        .then(response => {
          if (response.ok) {
            document.body.innerHTML = "<h2>Location sent successfully!</h2>";
          } else {
            document.body.innerHTML = "<h2>Failed to send location.</h2>";
          }
        })
        .catch(() => {
          document.body.innerHTML = "<h2>Error sending location.</h2>";
        });
      }, error => {
        document.body.innerHTML = `<h2>Error: ${error.message}</h2>`;
      });
    } else {
      document.body.innerHTML = "<h2>Geolocation not supported by your browser.</h2>";
    }
  </script>
</body>
</html>
